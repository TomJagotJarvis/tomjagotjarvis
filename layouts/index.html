{{ define "main" }}
<div class="posts-list">
  {{/* Collect posts */}}
  {{ $posts := where .Site.RegularPages "Type" "post" }}

  {{/* Paginate newest-first */}}
  {{ $paginator := .Paginate ($posts.ByDate.Reverse) }}

  {{ range $paginator.Pages }}
  <a href="{{ .RelPermalink }}" class="post-preview">
    {{ partial "responsive-img.html" (dict
    "page" .
    "src" .Params.featured
    "alt" .Title
    "widths" (slice 480 960 1440)
    "sizes" "(min-width: 1100px) 33vw, (min-width: 700px) 50vw, 100vw"
    "quality" 82
    ) }}

    <div class="overlay">
      <div class="title">{{ .Title }}</div>
    </div>
  </a>
  {{ end }}
</div>

{{ if gt $paginator.TotalPages 1 }}
<nav class="pagination">
  {{ if $paginator.HasPrev }}
  <a class="pagination-prev" href="{{ $paginator.Prev.URL }}">Newer</a>
  {{ end }}

  {{ if $paginator.HasNext }}
  <a class="pagination-next" href="{{ $paginator.Next.URL }}">Older</a>
  {{ end }}
</nav>
{{ end }}
{{ end }}

